function extendTimeout(){var a=new Date;timeoutDate.setMinutes(a.getMinutes()+10),timeoutDate.setSeconds(a.getSeconds())}function MessageCenter(){function a(){if(!j&&new Date<=timeoutDate){var d={url:window.messageCenterSummary};(new AjaxHelper).sendMessage(d,b,c,null)}window.setTimeout(a,i)}function b(){j=!0}function c(a){var b="",c="",g=!1;if(a&&(b+=messageCenterTitle,a.messages&&a.messages.length>0)){var h=a.messages[0];d(h);for(var i="",l="",m=0;m<a.messages.length;m++){var n=a.messages[m];e(n)&&(c||(c=n.type),g=!0,l+=i,l+=n.type+";",l+=n.msg,i=";")}""!=l&&(b+=":"+l)}g?(f.attr("tooltiptext",b).attr("class",k+c),$("#messageCenterMobileButton").attr("class",c)):(f.attr("class","hidden"),$("#messageCenterMobileButton").attr("class","hidden")),j=!1}function d(a){g.text(a.msg),h.length>0?(h.attr("class","icon "+a.type),g.removeClass("hidden")):(h.attr("class","hidden"),g.addClass("hidden"))}function e(a){var b=a.type.toLowerCase();return $.inArray(b,l)>-1}var f,g,h,i=5e3,j=!1,k="msg-center ",l=["error","warning","popup","job-status","notification","message"];this.initialize=function(){f=$("#MessageCenter, #mobile-message-center"),0!=f.length&&(g=$("#MachineStatus"),h=$("#DeviceStatusSection span.icon"),extendTimeout(),a(),$(document).bind("keyup mousemove",extendTimeout))}}var timeoutDate=new Date;$(document).ready(function(){var a=new MessageCenter;a.initialize()});